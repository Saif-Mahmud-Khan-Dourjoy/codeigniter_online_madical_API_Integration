<!doctype html>
<html lang="en" class="md">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">

    <link rel="apple-touch-icon" href="img/f7-icon-square.html">
    <link rel="icon" href="img/f7-icon.html">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="vendor/bootstrap-4.1.3/css/bootstrap.min.css">

    <!-- Material design icons CSS -->
    <link rel="stylesheet" href="vendor/materializeicon/material-icons.css">

    <!-- swiper carousel CSS -->
    <link rel="stylesheet" href="vendor/swiper/css/swiper.min.css">

    <!-- app CSS -->
    <link id="theme" rel="stylesheet" href="css/style.css" type="text/css">


    <title>Doctors | Call & Cure</title>
</head>

<body class="color-theme-blue push-content-right theme-light">
    <div class="wrapper">
        <!-- sidebar left start -->
        <div class="sidebar sidebar-left">
            <div class="profile-link">
                <a href="doctor_own_profile.html" class="media">
                    <div class="w-auto h-100">
                        <figure class="avatar avatar-40"><img src="img/user1.png" alt=""> </figure>
                    </div>
                    <div class="media-body" id="doctor">
                        <!-- <h5>John Doe <span class="status-online bg-success"></span></h5>
                        <p>Bangladesh</p> -->
                    </div>
                </a>
            </div>
    <nav class="navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="appointment_list.html" class="sidebar-close">
                            <div class="item-title">
                                <i class="material-icons">filter_none</i> Appointments
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="doctor_prescriptions.html" class="sidebar-close">
                            <div class="item-title">
                                <i class="material-icons">list_alt</i>Prescriptions
                            </div>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="profile-link text-center" id="log">
               
            </div>
        </div>
        <!-- sidebar left ends -->

        <!-- page main start -->
        <div class="page">
           <header class="row m-0 fixed-header">

                <div class="left">
                    <a href="javascript:void(0)" class="menu-left"><i class="material-icons">menu</i></a>
                </div>
                <div class="col center">
                    <a href="#" class="logo">
                        <figure><img src="img/logo.png" alt=""></figure>
                    </a>
                </div>
            </header>
            <br>
            <br>
            <br>
            <br>
                 <div class="page-content h-100">
                <div class="background"></div>
                <div class="row mx-0">
                </div>
        <div id="Doctors" class="text-center container" >
            
    </div>
     </div>

        </div>

             <!-- <div class="footer">
        <ul class="footer-menu">

            <li>
                <a href="intro.html" class="sidebar-close">
                    <i class="material-icons">home</i>
                </a>
            </li>
            <li>
                <a href="user-profile.html" class="sidebar-close">
                    <i class="material-icons">perm_identity</i>
                </a>
            </li>
            <li>
                <a href="schedule.html" class="sidebar-close">
                    <i class="material-icons">play_for_work</i>
                </a>
            </li>
            <li>
                <a href="prescriptions.html" class="sidebar-close">
                    <i class="material-icons">content_paste</i>
                </a>
            </li>
        </ul>
    </div> -->
</div>




    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="vendor/bootstrap-4.1.3/js/bootstrap.min.js"></script>

    <!-- Cookie jquery file -->
    <script src="vendor/cookie/jquery.cookie.js"></script>

    <!-- sparklines chart jquery file -->
    <script src="vendor/sparklines/jquery.sparkline.min.js"></script>

    <!-- Circular progress gauge jquery file -->
    <script src="vendor/circle-progress/circle-progress.min.js"></script>

    <!-- Swiper carousel jquery file -->
    <script src="vendor/swiper/js/swiper.min.js"></script>

    <!-- Application main common jquery file -->
    <script src="js/main.js"></script>

    <!-- page specific script -->
    
    <script type="text/javascript" src="cordova.js"></script>

     <script>
   
     var doc_id=localStorage.getItem('id');
     // console.log(doc_id);

        $.ajax({
            url: "http://localhost/CnC/api/doctorprofile/doc_own_profile/"+doc_id,
            type: "get",
            dataType: 'json',
            success: function(data) {

                // console.log(data);

                // console.log(data.length);
                // return false;
                var op='<h5>'+data[0].name+'  <span class="status-online bg-success"></span></h5><p>Bangladesh</p>'
                var output = '';
                var status=data[0].active;
                output += '<div class="row mx-0">';
                // for (var i = 0; i < data.length; i++) {
                    output += '<div class="col-12">';
                    output += '<div class="card mb-3">';
                    output += '<div class="row">';
                    output += '<div class="col-4 text-center">';
                    output += '<figure class="avatar avatar-120 rounded-circle my-2">';
                    output += '<img src="img/user1.png" alt="user image">';
                    output += '</figure></div>';
                    output += '<div class="col-8"><div class="card-header"><h5 class="card-title">' + data[0].name + '</h5><p class="mb-0">' + data[0].specialized +' ('+data[0].degree +') </p><p class="mb-0">' + data[0].institute + '</p></div><div class="card-footer">';

                
                    if(status==1){
                    output+='<h6>You are now  <span class="text-success"> Active </span></h6><span class="mr-1">Want to Inactive?</span><a href="" id="chk1" class="btn btn-danger">Inactive</a>';
                    }else{
                    output+='<h6>You are now <span class="text-danger" > Inactive </span></h6><span class="mr-1">Want to Active?</span><a href="" id="chk2" class="btn btn-success">Active</a> End Time: <input type="time" id="myTime" value="'+data[0].duty_end+'">';
                    }

                  output+='</div></div></div></div></div> </div>';   

                // }
                

                $('#Doctors').html(output);
                $('#doctor').html(op);
                   


                 $('#chk1').click(function(){
                    // alert("hello");
                    // e.preventDefault();
           
                    var stat = ($(this).hasClass("btn-success")) ? '0' : '1'; 
                    var msg = (stat=='0')? 'Activate' : 'Deactivate'; 
                    if(confirm("Are you sure to "+ msg))
                    { 
                        
                    $.ajax({
                    url: "http://localhost/CnC/api/doctorprofile/statuschk/"+doc_id,
                    type: "post",
                    dataType: 'json',
                    data: {
                      
                        'status': status,
                        
                    },
                    success: function(data) {
                      console.log(data);
                    }

                });
                 }  
                });

                      $('#chk2').click(function(){
                    // alert("hello");
                    // e.preventDefault();
                    var em_end_time = document.getElementById("myTime").value;
                    // console.log(em_end_time);
                    var stat = ($(this).hasClass("btn-success")) ? '0' : '1'; 
                    var msg = (stat=='0')? 'Activate' : 'Deactivate'; 
                    if(confirm("Are you sure to "+ msg))
                    { 
                        
                    $.ajax({
                    url: "http://localhost/CnC/api/doctorprofile/statuschk2/"+doc_id,
                    type: "post",
                    dataType: 'json',
                    data: {
                      
                        'status': status,
                        'em_end_time': em_end_time,
                        
                    },
                    success: function(data) {
                      console.log(data);
                    }

                });
                 }  
                });

                     


            }
        });
    </script>
       <script type="text/javascript">
        var user_id=localStorage.getItem('user_id');
        if(user_id !== null && user_id !== ''){
          document.getElementById('log').innerHTML ='<a  class="btn btn-outline-white btn-block px-3" id="logout">Logout</a>';
        }else{
        document.getElementById('log').innerHTML ='<a  class="btn btn-outline-white btn-block px-3">Login</a>';
        // window.location.replace("main.html");
        }
    </script>
      <script type="text/javascript">
        $('#logout').click(function(){
             localStorage.removeItem('user_id');
            window.location.replace("main.html");
        });
    </script>
</body>
</html>

