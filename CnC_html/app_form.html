<!doctype html>
<html lang="en" class="md">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">

    <link rel="apple-touch-icon" href="img/f7-icon-square.html">
    <link rel="icon" href="img/f7-icon.html">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="vendor/bootstrap-4.1.3/css/bootstrap.min.css">

    <!-- Material design icons CSS -->
    <link rel="stylesheet" href="vendor/materializeicon/material-icons.css">

    <!-- swiper carousel CSS -->
    <link rel="stylesheet" href="vendor/swiper/css/swiper.min.css">

    <!-- app CSS -->
    <link id="theme" rel="stylesheet" href="css/style.css" type="text/css">


    <title>Doctor | Call n Cure</title>
</head>

<body class="color-theme-blue push-content-right theme-light">
    <div class="wrapper">

        <!-- sidebar left start -->
        <div class="sidebar sidebar-left">
            <div class="profile-link">
                <a href="user-profile.html" class="media">
                    <div class="w-auto h-100">
                        <figure class="avatar avatar-40"><img src="img/user1.png" alt=""> </figure>
                    </div>
                    <div class="media-body">
                        <h5 id="users_name">
                            <script>
                                document.getElementById('users_name').innerHTML = localStorage.getItem('users_name');
                            </script> <span class="status-online bg-success"></span></h5>
                        <p>Bangladesh</p>
                    </div>
                </a>
            </div>
            <nav class="navbar">
                <ul class="navbar-nav">
                   <!--  <li class="nav-item">
                        <a href="home.html" class="sidebar-close">
                            <div class="item-title">
                                <i class="material-icons">touch_app</i> Make Appiontment
                            </div>
                        </a>
                    </li> -->
                    <li class="nav-item">
                        <a href="all_doctors.html" class="sidebar-close">
                            <div class="item-title">
                                <i class="material-icons">supervisor_account</i>All Doctors
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="schedule.html" class="sidebar-close">
                            <div class="item-title">
                                <i class="material-icons">filter_none</i>My Appointments
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="prescriptions.html" class="sidebar-close">
                            <div class="item-title">
                                <i class="material-icons">list_alt</i>My Prescriptions
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="user-profile.html" class="sidebar-close">
                            <div class="item-title">
                                <i class="material-icons">person</i>My Profile
                            </div>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="profile-link text-center" id="log">
               
            </div>
        </div>
        <!-- sidebar left ends -->
        <!-- page main start -->
        <div class="page">
            <header class="row m-0 fixed-header">
                <div class="left">
                    <a href="javascript:void(0)" class="menu-left"><i class="material-icons">menu</i></a>
                </div>
                <div class="col center">
                    <a href="#" class="logo">
                        <figure><img src="img/logo.png" alt=""></figure>
                    </a>
                </div>
            </header>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>

                 <div class="container">

   <div class="table-responsive">
    <table class="table table-bordered bg-info" id="info">
     <tr>
      <th width="50%">Symptoms</th>
       <th width="45%">Duration</th>
       <th width="5%"></th>
     </tr>
     <tr>
      <td contenteditable='true' class="symptoms"></td>
      <td contenteditable='true' class="duration"></td>
     
      <td></td>
      
     </tr>
    </table>
    <div align="right">
     <button type="button" name="add" id="add" class="btn btn-success btn-xs">More+</button>
    </div>
   <!--  <div align="center">
     <button type="button" name="save" id="save" class="btn btn-info">Save</button>
    </div> -->
    <br />
   </div>
   
  </div>
                                <div class="login-input-content">
                                    <div class="input-group">
                                        
                                        <input type="text" class="form-control" placeholder="name" id="name" name="name">
                                    </div>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="age" name="age" placeholder="age">
                                    </div>
                                   <!--  <div class="input-group">
                                        
                                        <input type="text" class="form-control" placeholder="address" id="address" name="address">
                                    </div> -->
                                       <div class="input-group">
                                        
                                        <select class="form-control" name="district" id="district" required>  
                                         <option value="">Select District</option>
                                            <option value="Dhaka">Dhaka</option>
                                            <option value="Barisal">Barisal</option>
                                            <option value="CTG">CTG</option>
                                            <option value="Rajshahi">Rajshahi</option>
                                            <option value="Khulna">Khulna</option>
                                            <option value="MS">MS</option>
                                            <option value="Rangpur">Rangpur</option>
                                            <option value="Cumilla">Cumilla</option>
                                            <option value="Faridpur">Faridpur</option>
                                            <option value="Others">Others</option>
                       
                       
                                        </select>
                                    </div>
                                    <div class="input-group">
                                        
                                        <select class="form-control" name="gender" id="gender" required>   <option value="">Select Gender</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                       
                       
                                        </select>
                                    </div>
                                </div>

                                <div class="row mx-0 justify-content-end no-gutters">
                                    <div class="col-12">
                                        <button class="btn btn-block gradient border-0 z-3 btn-sm" id="save">Submit</button>
                                    </div>

                                </div>
                                <br>

                                 <div class="footer">
        <ul class="footer-menu">

            <li>
                <a href="intro.html" class="sidebar-close">
                    <i class="material-icons">home</i>
                </a>
            </li>
            <li>
                <a href="user-profile.html" class="sidebar-close">
                    <i class="material-icons">perm_identity</i>
                </a>
            </li>
            <li>
                <a href="schedule.html" class="sidebar-close">
                    <i class="material-icons">play_for_work</i>
                </a>
            </li>
            <li>
                <a href="prescriptions.html" class="sidebar-close">
                    <i class="material-icons">content_paste</i>
                </a>
            </li>
        </ul>
    </div>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="vendor/bootstrap-4.1.3/js/bootstrap.min.js"></script>

    <!-- Cookie jquery file -->
    <script src="vendor/cookie/jquery.cookie.js"></script>

    <!-- sparklines chart jquery file -->
    <script src="vendor/sparklines/jquery.sparkline.min.js"></script>

    <!-- Circular progress gauge jquery file -->
    <script src="vendor/circle-progress/circle-progress.min.js"></script>

    <!-- Swiper carousel jquery file -->
    <script src="vendor/swiper/js/swiper.min.js"></script>

    <!-- Application main common jquery file -->
    <script src="js/main.js"></script>

    <!-- page specific script -->

    <script type="text/javascript" src="cordova.js"></script>
                            
                            </div>
                        </div>
                        <!-- tabs content end here -->
                    </div>
                </div>

                <br>

            </div>

        </div>
        <!-- page main ends -->

    </div>




    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    

    <script type="text/javascript">
        $(document).ready(function(){
         
    
 var count=1;
 $('#add').click(function(){
  count++;
  var html_code = "<tr id='row"+count+"'>";
   html_code += "<td contenteditable='true' class='symptoms'></td>";
   html_code += "<td contenteditable='true' class='duration'></td>";
   html_code += "<td><button type='button' name='remove' data-row='row"+count+"' class='btn btn-danger btn-xs remove'>-</button></td>";   
   html_code += "</tr>";  
   $('#info').append(html_code);
 });
 
 $(document).on('click', '.remove', function(){
  var delete_row = $(this).data("row");
  // console.log(delete_row);
  // return false;
  $('#' + delete_row).remove();
 });

        var url_string = window.location.href;
        var url = new URL(url_string);
        var date = url.searchParams.get("date");
        var time = url.searchParams.get("time");
        var type = url.searchParams.get("type");
        var app_doctor_id= localStorage.getItem('app_doctor_id');
        var app_doctor_name=localStorage.getItem('app_doctor_name');
        var user_id=localStorage.getItem('user_id'); 
 
 $('#save').click(function(){

    // console.log('clicked');

    var name=$('#name').val();
    var age=$('#age').val();
    var district=$('#district').val();
    var gender=$('#gender').val();
      
    var symptoms = [];
    var duration = [];
 
  $('.symptoms').each(function(){
   symptoms.push($(this).text());
  });
  $('.duration').each(function(){
   duration.push($(this).text());
  });

  $.ajax({
            url:"http://localhost/CnC/api/appoint/set_appoint",
            type:"post",
            dataType:'json',
            data: {

                    'date': date,
                    'time': time,
                    'type': type,
                    'app_doctor_id': app_doctor_id,
                    'app_doctor_name': app_doctor_name,
                    'user_id': user_id,
                    'name': name,
                    'age': age,
                    'district': district,
                    'gender': gender,
                    'symptoms': symptoms,
                    'duration': duration,
                },
             success:function(data){
               
                  // swal("Appointment Successfull");
                   window.location.replace("schedule.html");
                 
                 
             },
             error: function() {
                  swal("Problem");
             }
         });
 });
});
 
    </script>
    <script type="text/javascript">
         var user_id = localStorage.getItem('user_id');
         $.ajax({
            url: "http://localhost/CnC/api/User/individualUser/" + user_id,
            type: "get",
            dataType: 'json',
            success: function(data) {
               $('#name').val(data[0].name);
               $('#age').val(data[0].age);
               $('#district').val(data[0].district);
               $('#gender').val(data[0].gender);

            }

        });

    </script>
       <script type="text/javascript">
        var user_id=localStorage.getItem('user_id');
        if(user_id !== null && user_id !== ''){
          document.getElementById('log').innerHTML ='<a  class="btn btn-outline-white btn-block px-3" id="logout">Logout</a>';
        }else{
        document.getElementById('log').innerHTML ='<a  class="btn btn-outline-white btn-block px-3">Login</a>';
        // window.location.replace("main.html");
        }
    </script>
      <script type="text/javascript">
        $('#logout').click(function(){
             localStorage.removeItem('user_id');
             window.location.replace("main.html");
             
        });
    </script>
